<project name="WFK2 test suite coverage of Spring framework generated by JaCoCo" default="jacoco-report" xmlns:jacoco="antlib:org.jacoco.ant">

	<taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
		<classpath path="${src-dir}/jacocoant.jar" />
	</taskdef>

        <target name="jacoco-merge">
            <jacoco:merge destfile="${target-dir}/merged.exec">
                <fileset dir="${src-dir}/target" includes="*.exec"/>
            </jacoco:merge>
        </target>

	<target name="jacoco-report">

		<antcall target="jacoco-merge" />

		<jacoco:report>

			<executiondata>
				<file file="${target-dir}/merged.exec" />
			</executiondata>

			<structure name="generate-jacoco-report">
				<classfiles>
					<fileset dir="${src-dir}/target/classes" />
				</classfiles>

       		        <sourcefiles encoding="UTF-8">
                    		<fileset dir="${src-dir}/target/sources"/>
	                </sourcefiles>

			</structure>

			<html destdir="${target-dir}/jacoco-report" />
			<csv destfile="${target-dir}/jacoco-report.csv" />
			<xml destfile="${target-dir}/jacoco-report.xml" />

		</jacoco:report>
	</target>

</project>
